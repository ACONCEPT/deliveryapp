
  /api/addresses:
    get:
      summary: Get customer addresses
      description: |
        Retrieve customer addresses. Behavior varies by user type:
        - **Customers**: Get their own addresses (no query params needed)
        - **Vendors/Drivers/Admins**: Get addresses for a specific customer (requires `customer_id` query param)
      tags:
        - Addresses
      security:
        - BearerAuth: []
      parameters:
        - name: customer_id
          in: query
          description: Customer ID (required for vendors, drivers, and admins)
          required: false
          schema:
            type: integer
            example: 1
      responses:
        '200':
          description: Addresses retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  addresses:
                    type: array
                    items:
                      $ref: '../schemas/address.yaml#/CustomerAddress'
        '400':
          description: Missing or invalid customer_id parameter
          content:
            application/json:
              schema:
                $ref: '../schemas/common.yaml#/ErrorResponse'
        '401':
          description: Authentication required
          content:
            application/json:
              schema:
                $ref: '../schemas/common.yaml#/ErrorResponse'
        '403':
          description: Access denied
          content:
            application/json:
              schema:
                $ref: '../schemas/common.yaml#/ErrorResponse'
        '500':
          description: Failed to retrieve addresses
          content:
            application/json:
              schema:
                $ref: '../schemas/common.yaml#/ErrorResponse'

  /api/addresses/{id}:
    get:
      summary: Get specific address
      description: |
        Retrieve a specific address by ID. Access rules:
        - **Customers**: Can only view their own addresses
        - **Vendors/Drivers/Admins**: Can view any address
      tags:
        - Addresses
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          description: Address ID
          required: true
          schema:
            type: integer
            example: 1
      responses:
        '200':
          description: Address retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  address:
                    $ref: '../schemas/address.yaml#/CustomerAddress'
        '400':
          description: Invalid address ID
          content:
            application/json:
              schema:
                $ref: '../schemas/common.yaml#/ErrorResponse'
        '401':
          description: Authentication required
          content:
            application/json:
              schema:
                $ref: '../schemas/common.yaml#/ErrorResponse'
        '403':
          description: Access denied (customer doesn't own this address)
          content:
            application/json:
              schema:
                $ref: '../schemas/common.yaml#/ErrorResponse'
        '404':
          description: Address not found
          content:
            application/json:
              schema:
                $ref: '../schemas/common.yaml#/ErrorResponse'

  /api/customer/addresses:
    post:
      summary: Create address
      description: Create a new address for the authenticated customer
      tags:
        - Addresses
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '../schemas/address.yaml#/CreateAddressRequest'
      responses:
        '201':
          description: Address created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Address created successfully
                  address:
                    $ref: '../schemas/address.yaml#/CustomerAddress'
        '400':
          description: Invalid request body
          content:
            application/json:
              schema:
                $ref: '../schemas/common.yaml#/ErrorResponse'
        '401':
          description: Authentication required
          content:
            application/json:
              schema:
                $ref: '../schemas/common.yaml#/ErrorResponse'
        '403':
          description: Only customers can create addresses
          content:
            application/json:
              schema:
                $ref: '../schemas/common.yaml#/ErrorResponse'
        '500':
          description: Failed to create address
          content:
            application/json:
              schema:
                $ref: '../schemas/common.yaml#/ErrorResponse'

  /api/customer/addresses/{id}:
    put:
      summary: Update address
      description: Update an existing address (only the owner can update)
      tags:
        - Addresses
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          description: Address ID
          required: true
          schema:
            type: integer
            example: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '../schemas/address.yaml#/UpdateAddressRequest'
      responses:
        '200':
          description: Address updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Address updated successfully
                  address:
                    $ref: '../schemas/address.yaml#/CustomerAddress'
        '400':
          description: Invalid request body or address ID
          content:
            application/json:
              schema:
                $ref: '../schemas/common.yaml#/ErrorResponse'
        '401':
          description: Authentication required
          content:
            application/json:
              schema:
                $ref: '../schemas/common.yaml#/ErrorResponse'
        '403':
          description: Access denied (not the owner)
          content:
            application/json:
              schema:
                $ref: '../schemas/common.yaml#/ErrorResponse'
        '404':
          description: Address not found
          content:
            application/json:
              schema:
                $ref: '../schemas/common.yaml#/ErrorResponse'
        '500':
          description: Failed to update address
          content:
            application/json:
              schema:
                $ref: '../schemas/common.yaml#/ErrorResponse'

    delete:
      summary: Delete address
      description: Delete an address (only the owner can delete)
      tags:
        - Addresses
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          description: Address ID
          required: true
          schema:
            type: integer
            example: 1
      responses:
        '200':
          description: Address deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Address deleted successfully
        '400':
          description: Invalid address ID
          content:
            application/json:
              schema:
                $ref: '../schemas/common.yaml#/ErrorResponse'
        '401':
          description: Authentication required
          content:
            application/json:
              schema:
                $ref: '../schemas/common.yaml#/ErrorResponse'
        '403':
          description: Access denied (not the owner)
          content:
            application/json:
              schema:
                $ref: '../schemas/common.yaml#/ErrorResponse'
        '404':
          description: Address not found
          content:
            application/json:
              schema:
                $ref: '../schemas/common.yaml#/ErrorResponse'
        '500':
          description: Failed to delete address
          content:
            application/json:
              schema:
                $ref: '../schemas/common.yaml#/ErrorResponse'

  /api/customer/addresses/{id}/set-default:
    put:
      summary: Set default address
      description: Set an address as the default for the authenticated customer
      tags:
        - Addresses
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          description: Address ID
          required: true
          schema:
            type: integer
            example: 1
      responses:
        '200':
          description: Default address updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Default address updated successfully
        '400':
          description: Invalid address ID
          content:
            application/json:
              schema:
                $ref: '../schemas/common.yaml#/ErrorResponse'
        '401':
          description: Authentication required
          content:
            application/json:
              schema:
                $ref: '../schemas/common.yaml#/ErrorResponse'
        '403':
          description: Access denied (not the owner)
          content:
            application/json:
              schema:
                $ref: '../schemas/common.yaml#/ErrorResponse'
        '404':
          description: Address not found
          content:
            application/json:
              schema:
                $ref: '../schemas/common.yaml#/ErrorResponse'
        '500':
          description: Failed to set default address
          content:
            application/json:
